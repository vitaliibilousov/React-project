---
folder: Getting Started
title: Keyframes & Orchestration
layout: ../../layouts/markdown-layout.astro
index: 3
icon: ðŸŽž 
description: The first step of working with jongleur is to define the keyframes through the orchestrate function.
---
import Alert from "@components/alerts.astro";

```twoslash include main
import { helpers, orchestrate } from "jongleur";
import { Vector3 } from "three";

const clips = orchestrate(
  // The `Base`
  {
    one: { opacity: 0, rotation: new Vector3(1, 1, 1) },
    two: { position: new Vector3(0, 0, 0) },
  },
  // The `Keyframes`
  {
    one: {
      1: { opacity: helpers.state(1) },
    },
    two: {
      0.5: { position: helpers.inherit },
      1: { position: helpers.state(new Vector3(1, 1, 1)) },
    },
  },
  // The `Config`
  {}
);
```

*Jongleur* tries to simplify the process of orchestrating animations of multiple objects in a scene, by having a single source of truth for the keyframes of the whole scene. This approach has multiple benefits in contrast to defining the behavior on a per-component or file basis. The main ones are:

- **Simplicity**: Easier maintenance of complex scenes
- **Independence** from the progress source: time-based animations follow the same structure as scroll-based scenes
- **Safety**: Catch bugs more easily and use typescript to enforce correct keyframes
- **Performance**: Only rerender the screen if something changed (using a [demand frameloop](./progress)) and pre-process as much as possible to increase runtime performance

# `orchestrate` function

The key part of the API that is concerned with processing a scene and the keyframes for that scene to the data struct that is used during runtime.

<Alert type="tip">
On the terminology of the orchestrate function: The inputs to the orchestration function are the `Base` definition of the scene, the `Keyframes` for the scene and a `Config`. The **result** is a store that contains the processed `Clips`. For the sake of this tutorial **clips** will always refer to the output of the orchestration function.
</Alert>

Let's first look at a complete example and then go over the three inputs to the function and their possible values.


```ts twoslash {1, 2}
// @include: main
```



## The `Base` and scene definition



Before 


```ts twoslash 
import { orchestrate, helpers, useRegister } from "jongleur";
console.log("error")
console.log("error")

// @errors: 2322
const clips = orchestrate(
    {
        first: { opacity: 0 },
        second: { opacity: 1 }
    }, 
    {
       first: { 1: { opacity: helpers.state(1) } },
       second: { 1: 
       { ooopacity: helpers.state(0) }}
    },
    {}
)

const register = useRegister(clips); // highlighted
//    ^?
```


<Alert type="info">
abcd
</Alert>

<Alert type="warn">
abcd
</Alert>
<Alert type="danger">
abcd
</Alert>
<Alert type="tip">
abcd
</Alert>
