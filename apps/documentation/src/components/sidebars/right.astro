---
import DarkToggle from "../utils/dark-toggle.tsx";

const { headings } = Astro.props;
---

<aside class="w-full flex flex-col space-y-4 sticky top-4" aria-label="Sidebar">
  {
    headings !== undefined && (
      <div>
        <h2 class="mb-2 text-2xl">Table of Contents</h2>
        <ul class="space-y-1 list-disc list-inside">
          <li class="items-center p-2 text-base font-normal text-slate-900 rounded-lg dark:text-white hover:bg-slate-100 dark:hover:bg-slate-700">
            <a href={"#"}>Top of page</a>
          </li>
          {headings.map(({ depth, slug, text }) =>
            depth <= 3 ? (
              <li
                class:list={[
                  "items-center p-2 font-normal text-slate-900 rounded-lg dark:text-white hover:bg-slate-100 dark:hover:bg-slate-700",
                  { "text-base": depth === 2, "text-sm": depth === 3 },
                ]}
                style={"margin-left: " + Math.max(depth - 2, 0) * 16 + "px"}
              >
                <a href={`#${slug}`}>{text}</a>
              </li>
            ) : null
          )}
        </ul>
      </div>
    )
  }
  <div>
    <h2 class="mb-2 text-2xl">More</h2>
    <ul class="space-y-2 list-outside">
      <li>
        <a
          href={"#"}
          class="flex items-center p-2 text-base font-normal text-slate-900 rounded-lg dark:text-white hover:bg-slate-100 dark:hover:bg-slate-700"
          >ðŸ–‹ <span class="ml-3">Edit this page</span>
        </a>
      </li>
    </ul>
  </div>
  <div class="flex justify-center">
    <DarkToggle client:idle />
  </div>
</aside>
